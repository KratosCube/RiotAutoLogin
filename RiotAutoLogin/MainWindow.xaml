<Window x:Class="RiotAutoLogin.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:RiotAutoLogin"
        xmlns:conv="clr-namespace:RiotAutoLogin.Converters"
        mc:Ignorable="d"
        Title="Riot Login Manager" 
        Height="750" 
        Width="900"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ResizeMode="CanResize"
        MouseLeftButtonDown="Window_MouseLeftButtonDown"
        UseLayoutRounding="True"
        SnapsToDevicePixels="True"
        Loaded="Window_Loaded">
    <Window.Resources>
        <!-- Theme colors (can be changed via code) -->
        <SolidColorBrush x:Key="MainBackgroundBrush" Color="#121218"/>
        <SolidColorBrush x:Key="CardBackgroundBrush" Color="#1A1A24"/>
        <SolidColorBrush x:Key="SecondaryBackgroundBrush" Color="#2E2E3A"/>
        <SolidColorBrush x:Key="TextColorBrush" Color="White"/>

        <!-- Instance of the RankInfoConverter -->
        <conv:RankInfoConverter x:Key="RankInfoConverter"/>
        <!-- Instance of the StringToImageSourceConverter -->
        <conv:StringToImageSourceConverter x:Key="StringToImageSourceConverter"/>
        <!-- Animation Resources -->
        <Storyboard x:Key="FadeIn">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                       From="0" To="1" Duration="0:0:0.3"/>
        </Storyboard>
        <!-- Modern Button Style -->
        <Style x:Key="ModernButton" TargetType="Button">
            <Setter Property="MinHeight" Value="40"/>
            <Setter Property="Background" Value="#FF5252"/>
            <Setter Property="Foreground" Value="{StaticResource TextColorBrush}"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                CornerRadius="8"
                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" BlurRadius="4" Opacity="0.2"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF3030"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#E04545"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="LightModeButton" TargetType="Button">
            <Setter Property="MinHeight" Value="40"/>
            <Setter Property="Background" Value="#FF5252"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                CornerRadius="8"
                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" BlurRadius="4" Opacity="0.2"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF7070"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF5050"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="LightModeSecondaryButton" TargetType="Button">
            <Setter Property="MinHeight" Value="40"/>
            <Setter Property="Background" Value="#D0D0E0"/>
            <!-- Light gray background -->
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                CornerRadius="8"
                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" BlurRadius="4" Opacity="0.2"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#C0C0D0"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#B0B0C0"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Modern ToggleButton Style -->
        <Style x:Key="ModernToggleButton" TargetType="ToggleButton">
            <Setter Property="MinHeight" Value="40"/>
            <Setter Property="Background" Value="{StaticResource SecondaryBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextColorBrush}"/>
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Border Background="{TemplateBinding Background}"
                    CornerRadius="8"
                    Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" BlurRadius="4" Opacity="0.2"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF3030"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="1.02" ScaleY="1.02"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#E04545"/>
                                <Setter Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter Property="Background" Value="#FF5252"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Theme Toggle Button Style -->
        <Style x:Key="ThemeToggleButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Width" Value="40"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Padding" Value="0"/>
            <Setter Property="Background" Value="{StaticResource SecondaryBackgroundBrush}"/>
            <Setter Property="FontSize" Value="18"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E4A"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- Secondary Button Style -->
        <Style x:Key="SecondaryButton" TargetType="Button" BasedOn="{StaticResource ModernButton}">
            <Setter Property="Background" Value="{StaticResource SecondaryBackgroundBrush}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E4A"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#1E1E2A"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- Modern TextBox Style -->
        <Style x:Key="ModernTextBox" TargetType="TextBox">
            <Setter Property="MinHeight" Value="40"/>
            <Setter Property="Background" Value="{StaticResource CardBackgroundBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource TextColorBrush}"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="15,12"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                    CornerRadius="8"
                    BorderThickness="{TemplateBinding BorderThickness}"
                    BorderBrush="{TemplateBinding BorderBrush}">
                            <ScrollViewer x:Name="PART_ContentHost"
                            Padding="{TemplateBinding Padding}"
                            Focusable="False"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter Property="BorderThickness" Value="1"/>
                                <Setter Property="BorderBrush" Value="#FF5252"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="BorderBrush" Value="#FF5252"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- Modern PasswordBox Template (styled similarly to ModernTextBox) -->
        <ControlTemplate x:Key="ModernPasswordBox" TargetType="PasswordBox">
            <Border Background="{StaticResource CardBackgroundBrush}"
              CornerRadius="8"
              BorderThickness="{TemplateBinding BorderThickness}"
              BorderBrush="{TemplateBinding BorderBrush}"
              MinHeight="40"
              Padding="15,12">
                <ScrollViewer x:Name="PART_ContentHost" Focusable="False"/>
            </Border>
            <ControlTemplate.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderThickness" Value="1"/>
                    <Setter Property="BorderBrush" Value="#FF5252"/>
                </Trigger>
            </ControlTemplate.Triggers>
        </ControlTemplate>
        <!-- Account Card Style (with bigger avatar) -->
        <Style x:Key="AccountCard" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardBackgroundBrush}"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="Margin" Value="5"/>
            <Setter Property="Padding" Value="15"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#3E3E4A"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="HorizontalAlignment" Value="Stretch"/>
            <!-- Subtle border color that works with dark theme -->
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect ShadowDepth="2" BlurRadius="5" Opacity="0.2"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2A2A36"/>
                    <Setter Property="BorderBrush" Value="#FF5252"/>
                    <!-- Highlight border on hover -->
                    <!-- Keep the same border thickness to avoid size changes -->
                </Trigger>
            </Style.Triggers>
        </Style>
        <!-- TabItem Style -->
        <Style x:Key="TabItemStyle" TargetType="TabItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border Name="Border" BorderThickness="0" Margin="2,0,2,0"
                    CornerRadius="10,10,0,0" Padding="15,10">
                            <ContentPresenter x:Name="ContentSite" ContentSource="Header"
                                HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#2A2A36"/>
                                <Setter Property="Foreground" Value="#FF5252"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="False">
                                <Setter TargetName="Border" Property="Background" Value="{StaticResource CardBackgroundBrush}"/>
                                <Setter Property="Foreground" Value="#AAAAAA"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="#2A2A36"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <!-- Stats Panel Style -->
        <Style x:Key="StatsPanel" TargetType="Border">
            <Setter Property="Background" Value="#222222"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="Margin" Value="0,15,0,0"/>
        </Style>
        <Style x:Key="DarkScrollBarStyle" TargetType="{x:Type ScrollBar}">
            <Setter Property="Background" Value="#121218"/>
            <Setter Property="BorderBrush" Value="#2E2E3A"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Width" Value="6"/>
            <!-- Reduced from 8 to 6 -->
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollBar}">
                        <Grid>
                            <Border Background="{TemplateBinding Background}" 
                            BorderBrush="{TemplateBinding BorderBrush}" 
                            BorderThickness="{TemplateBinding BorderThickness}"/>
                            <Track x:Name="PART_Track" IsDirectionReversed="True">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageUpCommand" Opacity="0"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.PageDownCommand" Opacity="0"/>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb>
                                        <Thumb.Template>
                                            <ControlTemplate TargetType="{x:Type Thumb}">
                                                <Border Background="#FF5252" CornerRadius="3"/>
                                                <!-- Reduced from 4 to 3 -->
                                            </ControlTemplate>
                                        </Thumb.Template>
                                    </Thumb>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ScrollViewer Style that uses the custom ScrollBar -->
        <Style x:Key="DarkScrollViewerStyle" TargetType="{x:Type ScrollViewer}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <ScrollContentPresenter Grid.Column="0" Grid.Row="0"/>

                            <ScrollBar x:Name="PART_VerticalScrollBar" 
                               Grid.Column="1" Grid.Row="0"
                               Style="{StaticResource DarkScrollBarStyle}"
                               Value="{TemplateBinding VerticalOffset}"
                               Maximum="{TemplateBinding ScrollableHeight}"
                               ViewportSize="{TemplateBinding ViewportHeight}"
                               Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"/>

                            <ScrollBar x:Name="PART_HorizontalScrollBar" 
                               Grid.Column="0" Grid.Row="1"
                               Style="{StaticResource DarkScrollBarStyle}"
                               Orientation="Horizontal"
                               Value="{TemplateBinding HorizontalOffset}"
                               Maximum="{TemplateBinding ScrollableWidth}"
                               ViewportSize="{TemplateBinding ViewportWidth}"
                               Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- Main Layout without Viewbox for natural resizing -->
    <Grid Width="900" Height="750" UseLayoutRounding="True" SnapsToDevicePixels="True">
        <Grid.RowDefinitions>
            <!-- Main Content Panel -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Main Bordered Content -->
        <Border Grid.Row="0" Background="{StaticResource MainBackgroundBrush}" CornerRadius="20" Margin="10">
            <Border.Effect>
                <DropShadowEffect ShadowDepth="0" BlurRadius="15" Opacity="0.2"/>
            </Border.Effect>
            <!-- Inner Grid to hold UI and ResizeGrip -->
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <!-- Window Controls -->
                <Grid Grid.Row="0" Height="50">
                    <TextBlock Text="Riot Login Manager" FontWeight="Bold" FontSize="20" 
                     Foreground="{StaticResource TextColorBrush}" VerticalAlignment="Center" HorizontalAlignment="Left" Margin="20,0,0,0"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,20,0">
                        <Button x:Name="btnMinimize" Click="btnMinimize_Click" Width="36" Height="36" Margin="5,0" 
            Style="{StaticResource SecondaryButton}">
                            <Path Data="M0,0 L10,0" Stroke="{StaticResource TextColorBrush}" StrokeThickness="1.5" 
              VerticalAlignment="Center" HorizontalAlignment="Center" Stretch="Uniform" Width="12"/>
                        </Button>
                        <Button x:Name="btnClose" Click="btnClose_Click" Width="36" Height="36" Margin="5,0" 
            Style="{StaticResource ModernButton}">
                            <Path Data="M0,0 L10,10 M0,10 L10,0" Stroke="{StaticResource TextColorBrush}" StrokeThickness="1.5" 
              VerticalAlignment="Center" HorizontalAlignment="Center" Stretch="Uniform" Width="12"/>
                        </Button>
                    </StackPanel>
                </Grid>
                <!-- Main Content Tabs -->
                <TabControl Grid.Row="1" Background="Transparent" BorderThickness="0" Margin="20">
                    <TabControl.Resources>
                        <Style TargetType="TabPanel">
                            <Setter Property="Background" Value="Transparent"/>
                        </Style>
                    </TabControl.Resources>
                    <!-- LOGIN Tab -->
                    <TabItem Header="LOGIN" Style="{StaticResource TabItemStyle}">
                        <Grid Margin="0,20,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto" VerticalAlignment="Top" Style="{StaticResource DarkScrollViewerStyle}">
                                <ItemsControl x:Name="icLoginAccounts" ItemsSource="{Binding ElementName=lbLoginAccounts, Path=ItemsSource}" 
                                              VerticalAlignment="Top">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="4" VerticalAlignment="Top" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Style="{StaticResource AccountCard}"
            Width="190" Height="240"
            RenderTransformOrigin="0.5,0.5"
            MouseDown="AccountCard_MouseDown"
            Tag="{Binding}"
            ToolTip="{Binding Region, StringFormat='Server: {0}'}"
            x:Name="loginCard">
                                                <Border.RenderTransform>
                                                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                                                </Border.RenderTransform>
                                                <Grid Margin="0,0,0,5">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <!-- Bigger Avatar -->
                                                    <Image Grid.Row="0" Source="{Binding AvatarPath, Converter={StaticResource StringToImageSourceConverter}}"
                   Width="120" Height="120" Stretch="UniformToFill" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                                    <TextBlock Grid.Row="1" Text="{Binding GameName}" FontSize="16" FontWeight="Bold" 
                       TextAlignment="Center" HorizontalAlignment="Center" Foreground="{StaticResource TextColorBrush}"
                       TextWrapping="Wrap" Margin="0,0,0,2"/>
                                                    <TextBlock Grid.Row="2" Text="{Binding RankInfo, Converter={StaticResource RankInfoConverter}}" 
                       FontSize="14" FontWeight="SemiBold" TextAlignment="Center" HorizontalAlignment="Center" Foreground="{StaticResource TextColorBrush}"
                       TextWrapping="Wrap" Margin="0,2,0,2" VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Row="3" FontSize="14" TextAlignment="Center" HorizontalAlignment="Center"
                       TextWrapping="Wrap" Margin="0,2,0,0">
                <Run Text="{Binding LeaguePoints}" Foreground="{StaticResource TextColorBrush}"/>
                <Run Text=" LP, " Foreground="{StaticResource TextColorBrush}"/>
                <Run Text="{Binding Wins}" Foreground="#22BABB"/>
                <Run Text="W/" Foreground="{StaticResource TextColorBrush}"/>
                <Run Text="{Binding Losses}" Foreground="#F24405"/>
                <Run Text="L" Foreground="{StaticResource TextColorBrush}"/>
                                                    </TextBlock>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                            <ListBox x:Name="lbLoginAccounts" Visibility="Collapsed" MouseDoubleClick="lbLoginAccounts_MouseDoubleClick"/>

                            <!-- Stats Panel at the bottom -->
                            <Border x:Name="statsPanel" Grid.Row="1" Style="{StaticResource StatsPanel}">
                                <TextBlock x:Name="txtTotalGames" Text="Total Games: 0 | Wins: 0 | Losses: 0 | Win Rate: 0%" 
                                           Foreground="{StaticResource TextColorBrush}" FontSize="16"/>
                            </Border>
                            <!-- Status label (hidden but kept for code-behind references) -->
                            <TextBlock x:Name="lblStatus" Visibility="Collapsed"/>
                        </Grid>
                    </TabItem>
                    <!-- MANAGE ACCOUNTS Tab -->
                    <TabItem Header="MANAGE ACCOUNTS" Style="{StaticResource TabItemStyle}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <!-- Left side - Account list -->
                            <ScrollViewer Grid.Column="0" VerticalScrollBarVisibility="Auto" Margin="0,20,10,0" VerticalAlignment="Top" Style="{StaticResource DarkScrollViewerStyle}">
                                <ItemsControl x:Name="icAccounts" ItemsSource="{Binding ElementName=lbAccounts, Path=ItemsSource}"
                  VerticalAlignment="Top">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="2" VerticalAlignment="Top" HorizontalAlignment="Stretch" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="{StaticResource CardBackgroundBrush}"
                        CornerRadius="10"
                        Width="180" Height="240"
                        Margin="4" 
                        Padding="12"
                        BorderThickness="1"
                        BorderBrush="#3E3E4A"
                        RenderTransformOrigin="0.5,0.5"
                        MouseDown="AccountCard_MouseDown"
                        Tag="{Binding}"
                        ToolTip="{Binding Region, StringFormat='Server: {0}'}"
                        VerticalAlignment="Top">
                                                <Border.Effect>
                                                    <DropShadowEffect ShadowDepth="2" BlurRadius="5" Opacity="0.2"/>
                                                </Border.Effect>
                                                <Grid Margin="0,0,0,5">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>
                                                    <!-- Bigger Avatar -->
                                                    <Image Grid.Row="0" Source="{Binding AvatarPath, Converter={StaticResource StringToImageSourceConverter}}"
                   Width="120" Height="120" Stretch="UniformToFill" HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                                    <TextBlock Grid.Row="1" Text="{Binding GameName}" FontSize="16" FontWeight="Bold" 
                       TextAlignment="Center" HorizontalAlignment="Center" Foreground="{StaticResource TextColorBrush}"
                       TextWrapping="Wrap" Margin="0,0,0,2"/>
                                                    <TextBlock Grid.Row="2" Text="{Binding RankInfo, Converter={StaticResource RankInfoConverter}}" 
                       FontSize="14" FontWeight="SemiBold" TextAlignment="Center" HorizontalAlignment="Center" Foreground="{StaticResource TextColorBrush}"
                       TextWrapping="Wrap" Margin="0,2,0,2" VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Row="3" FontSize="14" TextAlignment="Center" HorizontalAlignment="Center"
                      TextWrapping="Wrap" Margin="0,2,0,0">
                <Run Text="{Binding LeaguePoints}" Foreground="{StaticResource TextColorBrush}"/>
                <Run Text=" LP, " Foreground="{StaticResource TextColorBrush}"/>
                <Run Text="{Binding Wins}" Foreground="#22BABB"/>
                <Run Text="W/" Foreground="{StaticResource TextColorBrush}"/>
                <Run Text="{Binding Losses}" Foreground="#F24405"/>
                <Run Text="L" Foreground="{StaticResource TextColorBrush}"/>
                                                    </TextBlock>
                                                </Grid>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </ScrollViewer>
                            <ListBox x:Name="lbAccounts" Visibility="Collapsed" SelectionChanged="lbAccounts_SelectionChanged"/>

                            <!-- Right Panel for Account Details -->
                            <Grid Grid.Column="1" Margin="10,20,0,0">
                                <Grid.RowDefinitions>
                                    <!-- Region Section -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- Account Login Input -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- Game Name Input -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- Tagline Input -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- AVATAR Title -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- Avatar Selection Controls -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- Password Input -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- Buttons Row -->
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <!-- Region Section -->
                                <StackPanel Grid.Row="0" Margin="0,0,0,15">
                                    <TextBlock Text="REGION" FontSize="14" Foreground="{StaticResource TextColorBrush}" Margin="0,0,0,5"/>
                                    <StackPanel Orientation="Horizontal">
                                        <ToggleButton x:Name="btnEUNE" Content="EUNE" Style="{StaticResource ModernToggleButton}" 
                                                      MinWidth="120" IsChecked="True" Checked="btnEUNE_Checked"/>
                                        <ToggleButton x:Name="btnEUW" Content="EUW" Style="{StaticResource ModernToggleButton}" 
                                                      MinWidth="120" Margin="10,0,0,0" Checked="btnEUW_Checked"/>
                                    </StackPanel>
                                </StackPanel>
                                <!-- Account Login Input -->
                                <StackPanel Grid.Row="1" Margin="0,0,0,15">
                                    <TextBlock Text="ACCOUNT LOGIN" Foreground="{StaticResource TextColorBrush}" FontSize="14" Margin="0,0,0,5"/>
                                    <TextBox x:Name="txtAccountLogin" Style="{StaticResource ModernTextBox}"/>
                                </StackPanel>
                                <!-- Game Name Input -->
                                <StackPanel Grid.Row="2" Margin="0,0,0,15">
                                    <TextBlock Text="GAME NAME" Foreground="{StaticResource TextColorBrush}" FontSize="14" Margin="0,0,0,5"/>
                                    <TextBox x:Name="txtGameName" Style="{StaticResource ModernTextBox}"/>
                                </StackPanel>
                                <!-- Tagline Input -->
                                <StackPanel Grid.Row="3" Margin="0,0,0,15">
                                    <TextBlock Text="TAGLINE" Foreground="{StaticResource TextColorBrush}" FontSize="14" Margin="0,0,0,5"/>
                                    <TextBox x:Name="txtTagLine" Style="{StaticResource ModernTextBox}"/>
                                </StackPanel>
                                <!-- AVATAR Title -->
                                <StackPanel Grid.Row="4" Margin="0,0,0,5">
                                    <TextBlock Text="AVATAR" Foreground="{StaticResource TextColorBrush}" FontSize="14"/>
                                </StackPanel>
                                <!-- Avatar Selection Controls: Button on left, image on right -->
                                <StackPanel Grid.Row="5" Orientation="Horizontal" Margin="0,0,0,15" VerticalAlignment="Center">
                                    <Button x:Name="btnSelectAvatar" Content="Select Avatar" Style="{StaticResource ModernButton}"
                                            Height="40" Click="btnSelectAvatar_Click" Margin="0,0,10,0"/>
                                    <Image x:Name="imgAvatarPreview" Width="60" Height="60" Stretch="UniformToFill"/>
                                </StackPanel>
                                <!-- Password Input -->
                                <StackPanel Grid.Row="6" Margin="0,0,0,15">
                                    <TextBlock Text="PASSWORD" Foreground="{StaticResource TextColorBrush}" FontSize="14" Margin="0,0,0,5"/>
                                    <PasswordBox x:Name="txtAccountPassword" Template="{StaticResource ModernPasswordBox}" 
                                                 Foreground="{StaticResource TextColorBrush}" BorderThickness="0" FontSize="14"/>
                                </StackPanel>
                                <!-- Buttons Row: ADD, UPDATE, DELETE on left; CHECK RANK on right -->
                                <Grid Grid.Row="7">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Left">
                                        <Button x:Name="btnAddAccount" Content="ADD" Style="{StaticResource ModernButton}" 
                                                Click="btnAddAccount_Click" Margin="0,0,10,0"/>
                                        <Button x:Name="btnUpdateAccount" Content="UPDATE" Style="{StaticResource SecondaryButton}" 
                                                Click="btnUpdateAccount_Click" Margin="0,0,10,0"/>
                                        <Button x:Name="btnDeleteAccount" Content="DELETE" Style="{StaticResource SecondaryButton}" 
                                                Click="btnDeleteAccount_Click"/>
                                    </StackPanel>
                                    <Button Grid.Column="1" x:Name="btnCheckRank" Content="Check Rank" 
                                            Style="{StaticResource ModernButton}" Click="btnCheckRank_Click"/>
                                </Grid>
                            </Grid>
                        </Grid>
                    </TabItem>
                    <!-- Add to your TabControl -->
                    <TabItem Header="SETTINGS" Style="{StaticResource TabItemStyle}">
                        <Grid Margin="0,20,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0" Text="RIOT API KEY" FontSize="16" FontWeight="SemiBold" 
                   Foreground="{StaticResource TextColorBrush}" Margin="0,0,0,10"/>

                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBox x:Name="txtApiKey" Style="{StaticResource ModernTextBox}" 
                     Grid.Column="0" Margin="0,0,10,0"/>
                                <Button x:Name="btnSaveApiKey" Content="Save" Style="{StaticResource ModernButton}" 
                    Grid.Column="1" Click="btnSaveApiKey_Click"/>
                            </Grid>

                            <TextBlock Grid.Row="2" Text="API Key is stored locally and used for retrieving player ranks." 
                   Foreground="{StaticResource TextColorBrush}" FontSize="14" TextWrapping="Wrap" 
                   Margin="0,15,0,0" Opacity="0.7"/>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>
        </Border>
    </Grid>
</Window>